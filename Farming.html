<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>种田极简版</title>
<style>
  html, body {
    margin: 0; padding: 0; background: #1a2f1a; color: #9ab973;
    font-family: monospace; font-size: 10px; /* 字号极小 */
    overflow: hidden;
    height: 100vh; width: 100vw;
  }
  #container {
    padding: 4px;
    box-sizing: border-box;
    height: 100%;
    width: 100%;
    overflow-y: auto;
    background: #2c4a2c;
  }
  #status {
    font-size: 9px;
    border-bottom: 1px solid #4a5f3c;
    padding-bottom: 3px;
    margin-bottom: 3px;
  }
  #status span {
    display: inline-block;
    width: 48%;
    margin-bottom: 2px;
  }
  #story {
    white-space: pre-wrap;
    margin-bottom: 6px;
  }
  button {
    width: 100%;
    margin-bottom: 4px;
    padding: 3px;
    font-size: 9px;
    background: #3d4f32;
    border: none;
    color: #9ab973;
    cursor: pointer;
  }
  button:active {
    background: #4d633f;
  }
</style>
</head>
<body>
  <div id="container">
    <div id="status">
      <span>体力: 100</span>
      <span>金币: 100</span>
      <span>季节: 春</span>
      <span>天数: 1</span>
    </div>
    <div id="story">
这是你的农田。  
杂草丛生，需清理后才能耕种。  
作物：  
- 萝卜：5金币，5天成熟，售价15金币  
- 白菜：10金币，7天成熟，售价25金币  
- 土豆：15金币，10天成熟，售价40金币  
    </div>
    <button>清理土地 (-20体力)</button>
    <button>种植作物 (-10体力)</button>
    <button>浇水 (-5体力)</button>
    <button>收获作物 (-10体力)</button>
    <button>休息 (+30体力)</button>
    <button>结束当天</button>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(function () {
      // 你的游戏逻辑写这里，和你之前差不多，只是UI用上面布局
      let gameState = {
        energy: 100,
        money: 100,
        season: '春',
        day: 1,
        crops: [],
        maxCrops: 4,
        clearedLand: 0,
        cropTypes: {
          carrot: { name: '萝卜', growthTime: 5, price: 15, cost: 5 },
          cabbage: { name: '白菜', growthTime: 7, price: 25, cost: 10 },
          potato: { name: '土豆', growthTime: 10, price: 40, cost: 15 },
        },
      };

      function updateStatus() {
        $('#energy').text(gameState.energy);
        $('#money').text(gameState.money);
        $('#season').text(gameState.season);
        $('#day').text(gameState.day);
      }

      function showMainMenu() {
        $('#choices').html(`
          <button class="choice-btn" onclick="makeChoice('clear')">清理土地 (-20体力)</button>
          <button class="choice-btn" onclick="makeChoice('plant')">种植作物 (-10体力)</button>
          <button class="choice-btn" onclick="makeChoice('water')">浇水 (-5体力)</button>
          <button class="choice-btn" onclick="makeChoice('harvest')">收获作物 (-10体力)</button>
          <button class="choice-btn" onclick="makeChoice('rest')">休息 (+30体力)</button>
          <button class="choice-btn" onclick="makeChoice('nextDay')">结束当天</button>
        `);
      }

      window.makeChoice = function (action) {
        switch (action) {
          case 'clear':
            if (gameState.energy >= 20 && gameState.clearedLand < gameState.maxCrops) {
              gameState.energy -= 20;
              gameState.clearedLand++;
              $('#story-text').html(`你清理了一块土地！<br>已清理的土地：${gameState.clearedLand}/${gameState.maxCrops}块`);
            } else if (gameState.clearedLand >= gameState.maxCrops) {
              $('#story-text').text('所有土地都已经清理完毕了！');
            } else {
              $('#story-text').text('体力不足，需要休息！');
            }
            break;

          case 'plant':
            if (gameState.clearedLand > 0 && gameState.energy >= 10) {
              let plantMenu = `
                <div>选择要种植的作物：</div>
                <button class="choice-btn" onclick="plantCrop('carrot')">种植萝卜 (5金币)</button>
                <button class="choice-btn" onclick="plantCrop('cabbage')">种植白菜 (10金币)</button>
                <button class="choice-btn" onclick="plantCrop('potato')">种植土豆 (15金币)</button>
                <button class="choice-btn" onclick="showMainMenu()">取消</button>
              `;
              $('#choices').html(plantMenu);
              $('#story-text').text('请选择作物种类');
            } else if (gameState.clearedLand === 0) {
              $('#story-text').text('需要先清理土地才能种植！');
            } else {
              $('#story-text').text('体力不足，需要休息！');
            }
            break;

          case 'water':
            if (gameState.energy >= 5 && gameState.crops.length > 0) {
              gameState.energy -= 5;
              gameState.crops.forEach(crop => {
                crop.watered = true;
              });
              $('#story-text').text('你给所有作物都浇了水！');
            } else if (gameState.crops.length === 0) {
              $('#story-text').text('没有需要浇水的作物！');
            } else {
              $('#story-text').text('体力不足，需要休息！');
            }
            break;

          case 'harvest':
            if (gameState.energy >= 10) {
              let harvestedCount = 0;
              gameState.crops = gameState.crops.filter(crop => {
                if (crop.daysGrown >= gameState.cropTypes[crop.type].growthTime) {
                  harvestedCount++;
                  gameState.money += gameState.cropTypes[crop.type].price;
                  return false;
                }
                return true;
              });
              if (harvestedCount > 0) {
                gameState.energy -= 10;
                $('#story-text').text(`收获了${harvestedCount}个作物！`);
              } else {
                $('#story-text').text('没有可以收获的作物！');
              }
            } else {
              $('#story-text').text('体力不足，需要休息！');
            }
            break;

          case 'rest':
            gameState.energy = Math.min(100, gameState.energy + 30);
            $('#story-text').text('休息后恢复了一些体力！');
            break;

          case 'nextDay':
            gameState.day++;
            gameState.energy = 100;
            // 作物生长更新
            gameState.crops.forEach(crop => {
              if (crop.watered) {
                crop.daysGrown++;
                crop.watered = false;
              }
            });
            updateCropStatus();
            break;
        }
        updateStatus();
      };

      window.plantCrop = function (cropType) {
        const cost = gameState.cropTypes[cropType].cost;
        if (gameState.money >= cost) {
          gameState.money -= cost;
          gameState.energy -= 10;
          gameState.crops.push({
            type: cropType,
            daysGrown: 0,
            watered: false,
          });
          $('#story-text').text(`种下了一颗${gameState.cropTypes[cropType].name}！`);
          showMainMenu();
        } else {
          $('#story-text').text('金币不足！');
        }
        updateStatus();
      };

      function updateCropStatus() {
        if (gameState.crops.length === 0) {
          $('#story-text').text('当前没有正在生长的作物。');
          return;
        }
        let status = '当前农田状态：\n';
        gameState.crops.forEach(crop => {
          const c = gameState.cropTypes[crop.type];
          status += `${c.name}: 已生长${crop.daysGrown}/${c.growthTime}天 ${crop.watered ? '(已浇水)' : '(未浇水)'}\n`;
        });
        $('#story-text').text(status);
      }

      updateStatus();
    });
  </script>
</body>
</html>
